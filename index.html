&#x3C;main class=&#x22;container mx-auto px-4 py-8&#x22;&#x3E;
    &#x3C;!-- &#x4E13;&#x5C5E;&#x95EE;&#x5019;&#x8BED; --&#x3E;
    &#x3C;div class=&#x22;mb-6 text-center&#x22;&#x3E;
        &#x3C;p id=&#x22;greeting&#x22; class=&#x22;text-secondary font-medium text-lg&#x22;&#x3E;&#x4EB2;&#x7231;&#x7684;&#x5996;&#x602A;&#xFF0C;&#x4ECA;&#x5929;&#x4E5F;&#x8981;&#x5143;&#x6C14;&#x6EE1;&#x6EE1;&#x5730;&#x8DD1;&#x6B65;&#x54E6;&#xFF01;&#x3C;/p&#x3E;
    &#x3C;/div&#x3E;

    <!-- 红心显示区域 -->

    &#x3C;div class=&#x22;relative mb-10 w-full max-w-md mx-auto&#x22;&#x3E;
        &#x3C;div id=&#x22;pulseRing&#x22; class=&#x22;w-full aspect-square rounded-full border-8 border-primary/20 flex items-center justify-center pulse-ring&#x22;&#x3E;&#x3C;/div&#x3E;
        &#x3C;div id=&#x22;heartContainer&#x22; class=&#x22;absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[90%] h-[90%] rounded-full bg-white flex items-center justify-center shadow-lg&#x22;&#x3E;
            &#x3C;i id=&#x22;beatIcon&#x22; class=&#x22;fa fa-heart text-red-500 heart-beat&#x22;&#x3E;&#x3C;/i&#x3E;
        &#x3C;/div&#x3E;
        &#x3C;!-- &#x88C5;&#x9970;&#x5143;&#x7D20; --&#x3E;
        &#x3C;div class=&#x22;absolute -top-3 -left-3 w-10 h-10 bg-accent rounded-full flex items-center justify-center text-white float&#x22;&#x3E;
            &#x3C;i class=&#x22;fa fa-bolt&#x22;&#x3E;&#x3C;/i&#x3E;
        &#x3C;/div&#x3E;
        &#x3C;div class=&#x22;absolute -bottom-2 -right-2 w-8 h-8 bg-secondary rounded-full flex items-center justify-center text-white float&#x22; style=&#x22;animation-delay: 1s&#x22;&#x3E;
            &#x3C;i class=&#x22;fa fa-heart&#x22;&#x3E;&#x3C;/i&#x3E;
        &#x3C;/div&#x3E;
    &#x3C;/div&#x3E;

    <!-- 四拍节奏可视化 -->

    &#x3C;div class=&#x22;bg-white rounded-xl p-4 shadow-md mb-8 max-w-md mx-auto&#x22;&#x3E;
        &#x3C;div class=&#x22;flex justify-between items-center mb-4&#x22;&#x3E;
            &#x3C;h2 class=&#x22;font-medium text-gray-700&#x22;&#x3E;&#x5F53;&#x524D;&#x8282;&#x594F;&#x3C;/h2&#x3E;
            &#x3C;div class=&#x22;flex items-center gap-2&#x22;&#x3E;
                &#x3C;span class=&#x22;text-xs text-gray-500&#x22;&#x3E;&#x6B65;&#x9891;:&#x3C;/span&#x3E;
                &#x3C;span id=&#x22;bpmDisplay&#x22; class=&#x22;font-medium text-primary&#x22;&#x3E;150&#x3C;/span&#x3E;
            &#x3C;/div&#x3E;
        &#x3C;/div&#x3E;

        <!-- 四拍可视化 -->

        &#x3C;div class=&#x22;grid grid-cols-4 gap-2 mb-2&#x22;&#x3E;
            &#x3C;div id=&#x22;beat1&#x22; class=&#x22;h-16 rounded-lg border-2 border-gray-200 flex items-center justify-center text-gray-400&#x22;&#x3E;
                &#x3C;span&#x3E;1&#x3C;/span&#x3E;
            &#x3C;/div&#x3E;
            &#x3C;div id=&#x22;beat2&#x22; class=&#x22;h-16 rounded-lg border-2 border-gray-200 flex items-center justify-center text-gray-400&#x22;&#x3E;
                &#x3C;span&#x3E;2&#x3C;/span&#x3E;
            &#x3C;/div&#x3E;
            &#x3C;div id=&#x22;beat3&#x22; class=&#x22;h-16 rounded-lg border-2 border-gray-200 flex items-center justify-center text-gray-400&#x22;&#x3E;
                &#x3C;span&#x3E;3&#x3C;/span&#x3E;
            &#x3C;/div&#x3E;
            &#x3C;div id=&#x22;beat4&#x22; class=&#x22;h-16 rounded-lg border-2 border-gray-200 flex items-center justify-center text-gray-400&#x22;&#x3E;
                &#x3C;span&#x3E;4&#x3C;/span&#x3E;
            &#x3C;/div&#x3E;
        &#x3C;/div&#x3E;

        <!-- 音效说明 -->

        &#x3C;div class=&#x22;flex gap-4 text-sm text-center&#x22;&#x3E;
            &#x3C;div class=&#x22;flex-1&#x22;&#x3E;
                &#x3C;div class=&#x22;w-4 h-4 rounded-full bg-aSound mx-auto mb-1&#x22;&#x3E;&#x3C;/div&#x3E;
                &#x3C;span&#x3E;&#x6EF4; - &#x53F3;&#x811A;&#x3C;/span&#x3E;
            &#x3C;/div&#x3E;
            &#x3C;div class=&#x22;flex-1&#x22;&#x3E;
                &#x3C;div class=&#x22;w-4 h-4 rounded-full bg-bSound mx-auto mb-1&#x22;&#x3E;&#x3C;/div&#x3E;
                &#x3C;span&#x3E;&#x7B54; - &#x5DE6;&#x811A;&#x3C;/span&#x3E;
            &#x3C;/div&#x3E;
        &#x3C;/div&#x3E;
    &#x3C;/div&#x3E;

    <!-- 数据统计 -->

    &#x3C;div class=&#x22;grid grid-cols-2 md:grid-cols-4 gap-4 mb-8 max-w-2xl mx-auto&#x22;&#x3E;
        &#x3C;div class=&#x22;bg-white rounded-xl p-4 shadow-md&#x22;&#x3E;
            &#x3C;p class=&#x22;text-gray-500 text-sm mb-1&#x22;&#x3E;&#x7528;&#x65F6;&#x3C;/p&#x3E;
            &#x3C;p id=&#x22;duration&#x22; class=&#x22;text-xl font-bold text-primary&#x22;&#x3E;00:00&#x3C;/p&#x3E;
        &#x3C;/div&#x3E;
        &#x3C;div class=&#x22;bg-white rounded-xl p-4 shadow-md&#x22;&#x3E;
            &#x3C;p class=&#x22;text-gray-500 text-sm mb-1&#x22;&#x3E;&#x8DDD;&#x79BB;&#x3C;/p&#x3E;
            &#x3C;p id=&#x22;distance&#x22; class=&#x22;text-xl font-bold text-primary&#x22;&#x3E;0.00 &#x516C;&#x91CC;&#x3C;/p&#x3E;
        &#x3C;/div&#x3E;
        &#x3C;div class=&#x22;bg-white rounded-xl p-4 shadow-md&#x22;&#x3E;
            &#x3C;p class=&#x22;text-gray-500 text-sm mb-1&#x22;&#x3E;&#x914D;&#x901F;&#x3C;/p&#x3E;
            &#x3C;p id=&#x22;pace&#x22; class=&#x22;text-xl font-bold text-primary&#x22;&#x3E;00:00&#x3C;/p&#x3E;
        &#x3C;/div&#x3E;
        &#x3C;div class=&#x22;bg-white rounded-xl p-4 shadow-md&#x22;&#x3E;
            &#x3C;p class=&#x22;text-gray-500 text-sm mb-1&#x22;&#x3E;&#x5F53;&#x524D;&#x516C;&#x91CC;&#x3C;/p&#x3E;
            &#x3C;p id=&#x22;currentKilometer&#x22; class=&#x22;text-xl font-bold text-primary&#x22;&#x3E;0&#x3C;/p&#x3E;
        &#x3C;/div&#x3E;
    &#x3C;/div&#x3E;

    <!-- 控制按钮 -->

    &#x3C;div class=&#x22;flex flex-wrap justify-center gap-4 mb-10&#x22;&#x3E;
        &#x3C;button id=&#x22;startBtn&#x22; class=&#x22;bg-primary hover:bg-primary/90 text-white px-6 py-3 rounded-lg transition-colors&#x22;&#x3E;
            &#x3C;i class=&#x22;fa fa-play mr-2&#x22;&#x3E;&#x3C;/i&#x3E;&#x5F00;&#x59CB;&#x8DD1;&#x6B65;
        &#x3C;/button&#x3E;
        &#x3C;button id=&#x22;pauseBtn&#x22; class=&#x22;bg-gray-200 text-gray-600 px-6 py-3 rounded-lg transition-colors&#x22; disabled&#x3E;
            &#x3C;i class=&#x22;fa fa-pause mr-2&#x22;&#x3E;&#x3C;/i&#x3E;&#x6682;&#x505C;
        &#x3C;/button&#x3E;
        &#x3C;button id=&#x22;resetBtn&#x22; class=&#x22;bg-gray-200 text-gray-600 px-6 py-3 rounded-lg transition-colors&#x22; disabled&#x3E;
            &#x3C;i class=&#x22;fa fa-refresh mr-2&#x22;&#x3E;&#x3C;/i&#x3E;&#x91CD;&#x7F6E;
        &#x3C;/button&#x3E;
    &#x3C;/div&#x3E;

    <!-- 节奏方案选择 -->

    &#x3C;div class=&#x22;bg-white rounded-xl p-4 shadow-md mb-8&#x22;&#x3E;
        &#x3C;h2 class=&#x22;font-medium text-gray-700 mb-4&#x22;&#x3E;&#x9009;&#x62E9;&#x8282;&#x594F;&#x65B9;&#x6848;&#x3C;/h2&#x3E;
        &#x3C;div class=&#x22;grid grid-cols-1 md:grid-cols-2 gap-3&#x22;&#x3E;
            &#x3C;!-- &#x65B9;&#x6848;1&#xFF1A;&#x7ECF;&#x5178;&#x5DE6;&#x53F3;&#x4EA4;&#x66FF; --&#x3E;
            &#x3C;div class=&#x22;pattern-btn border border-gray-200 rounded-lg p-3 hover:border-primary cursor-pointer transition-colors&#x22; data-pattern=&#x22;1&#x22;&#x3E;
                &#x3C;h3 class=&#x22;font-medium text-primary mb-1&#x22;&#x3E;1. &#x7ECF;&#x5178;&#x5DE6;&#x53F3;&#x4EA4;&#x66FF;&#x3C;/h3&#x3E;
                &#x3C;p class=&#x22;text-xs text-gray-500 mb-2&#x22;&#x3E;4&#x62CD;4&#x97F3; &#xB7; &#x5747;&#x5300;&#x4EA4;&#x66FF;&#x3C;/p&#x3E;
                &#x3C;div class=&#x22;flex gap-1&#x22;&#x3E;
                    &#x3C;span class=&#x22;w-6 h-6 rounded flex items-center justify-center text-xs sound-a&#x22;&#x3E;&#x6EF4;&#x3C;/span&#x3E;
                    &#x3C;span class=&#x22;w-6 h-6 rounded flex items-center justify-center text-xs sound-b&#x22;&#x3E;&#x7B54;&#x3C;/span&#x3E;
                    &#x3C;span class=&#x22;w-6 h-6 rounded flex items-center justify-center text-xs sound-a&#x22;&#x3E;&#x6EF4;&#x3C;/span&#x3E;
                    &#x3C;span class=&#x22;w-6 h-6 rounded flex items-center justify-center text-xs sound-b&#x22;&#x3E;&#x7B54;&#x3C;/span&#x3E;
                &#x3C;/div&#x3E;
            &#x3C;/div&#x3E;

            <!-- 方案2：双倍步频 -->

            &#x3C;div class=&#x22;pattern-btn border border-gray-200 rounded-lg p-3 hover:border-primary cursor-pointer transition-colors&#x22; data-pattern=&#x22;2&#x22;&#x3E;
                &#x3C;h3 class=&#x22;font-medium text-primary mb-1&#x22;&#x3E;2. &#x53CC;&#x500D;&#x6B65;&#x9891;&#x3C;/h3&#x3E;
                &#x3C;p class=&#x22;text-xs text-gray-500 mb-2&#x22;&#x3E;4&#x62CD;4&#x97F3; &#xB7; &#x5C0F;&#x6B65;&#x5FEB;&#x9891;&#x3C;/p&#x3E;
                &#x3C;div class=&#x22;flex gap-1&#x22;&#x3E;
                    &#x3C;span class=&#x22;w-6 h-6 rounded flex items-center justify-center text-xs sound-a&#x22;&#x3E;&#x6EF4;&#x3C;/span&#x3E;
                    &#x3C;span class=&#x22;w-6 h-6 rounded flex items-center justify-center text-xs sound-a&#x22;&#x3E;&#x6EF4;&#x3C;/span&#x3E;
                    &#x3C;span class=&#x22;w-6 h-6 rounded flex items-center justify-center text-xs sound-b&#x22;&#x3E;&#x7B54;&#x3C;/span&#x3E;
                    &#x3C;span class=&#x22;w-6 h-6 rounded flex items-center justify-center text-xs sound-b&#x22;&#x3E;&#x7B54;&#x3C;/span&#x3E;
                &#x3C;/div&#x3E;
            &#x3C;/div&#x3E;

            <!-- 方案3：重点步 -->

            &#x3C;div class=&#x22;pattern-btn border border-gray-200 rounded-lg p-3 hover:border-primary cursor-pointer transition-colors&#x22; data-pattern=&#x22;3&#x22;&#x3E;
                &#x3C;h3 class=&#x22;font-medium text-primary mb-1&#x22;&#x3E;3. &#x91CD;&#x70B9;&#x6B65;&#x3C;/h3&#x3E;
                &#x3C;p class=&#x22;text-xs text-gray-500 mb-2&#x22;&#x3E;4&#x62CD;3&#x97F3; &#xB7; &#x5F3A;&#x8C03;&#x8D77;&#x6B65;&#x3C;/p&#x3E;
                &#x3C;div class=&#x22;flex gap-1&#x22;&#x3E;
                    &#x3C;span class=&#x22;w-6 h-6 rounded flex items-center justify-center text-xs sound-a&#x22;&#x3E;&#x6EF4;&#x3C;/span&#x3E;
                    &#x3C;span class=&#x22;w-6 h-6 rounded flex items-center justify-center text-xs sound-b&#x22;&#x3E;&#x7B54;&#x3C;/span&#x3E;
                    &#x3C;span class=&#x22;w-6 h-6 rounded flex items-center justify-center text-xs border border-gray-200&#x22;&#x3E;-&#x3C;/span&#x3E;
                    &#x3C;span class=&#x22;w-6 h-6 rounded flex items-center justify-center text-xs sound-a&#x22;&#x3E;&#x6EF4;&#x3C;/span&#x3E;
                &#x3C;/div&#x3E;
            &#x3C;/div&#x3E;

            <!-- 方案4：切分节奏 -->

            &#x3C;div class=&#x22;pattern-btn border border-gray-200 rounded-lg p-3 hover:border-primary cursor-pointer transition-colors&#x22; data-pattern=&#x22;4&#x22;&#x3E;
                &#x3C;h3 class=&#x22;font-medium text-primary mb-1&#x22;&#x3E;4. &#x5207;&#x5206;&#x8282;&#x594F;&#x3C;/h3&#x3E;
                &#x3C;p class=&#x22;text-xs text-gray-500 mb-2&#x22;&#x3E;4&#x62CD;3&#x97F3; &#xB7; &#x8282;&#x594F;&#x53D8;&#x5316;&#x3C;/p&#x3E;
                &#x3C;div class=&#x22;flex gap-1&#x22;&#x3E;
                    &#x3C;span class=&#x22;w-6 h-6 rounded flex items-center justify-center text-xs sound-a&#x22;&#x3E;&#x6EF4;&#x3C;/span&#x3E;
                    &#x3C;span class=&#x22;w-6 h-6 rounded flex items-center justify-center text-xs border border-gray-200&#x22;&#x3E;-&#x3C;/span&#x3E;
                    &#x3C;span class=&#x22;w-6 h-6 rounded flex items-center justify-center text-xs sound-b&#x22;&#x3E;&#x7B54;&#x3C;/span&#x3E;
                    &#x3C;span class=&#x22;w-6 h-6 rounded flex items-center justify-center text-xs sound-b&#x22;&#x3E;&#x7B54;&#x3C;/span&#x3E;
                &#x3C;/div&#x3E;
            &#x3C;/div&#x3E;

            <!-- 方案5：华尔兹韵律 -->

            &#x3C;div class=&#x22;pattern-btn border border-gray-200 rounded-lg p-3 hover:border-primary cursor-pointer transition-colors&#x22; data-pattern=&#x22;5&#x22;&#x3E;
                &#x3C;h3 class=&#x22;font-medium text-primary mb-1&#x22;&#x3E;5. &#x534E;&#x5C14;&#x5179;&#x97F5;&#x5F8B;&#x3C;/h3&#x3E;
                &#x3C;p class=&#x22;text-xs text-gray-500 mb-2&#x22;&#x3E;4&#x62CD;3&#x97F3; &#xB7; &#x6D41;&#x52A8;&#x611F;&#x3C;/p&#x3E;
                &#x3C;div class=&#x22;flex gap-1&#x22;&#x3E;
                    &#x3C;span class=&#x22;w-6 h-6 rounded flex items-center justify-center text-xs sound-a&#x22;&#x3E;&#x6EF4;&#x3C;/span&#x3E;
                    &#x3C;span class=&#x22;w-6 h-6 rounded flex items-center justify-center text-xs border border-gray-200&#x22;&#x3E;-&#x3C;/span&#x3E;
                    &#x3C;span class=&#x22;w-6 h-6 rounded flex items-center justify-center text-xs sound-b&#x22;&#x3E;&#x7B54;&#x3C;/span&#x3E;
                    &#x3C;span class=&#x22;w-6 h-6 rounded flex items-center justify-center text-xs sound-a&#x22;&#x3E;&#x6EF4;&#x3C;/span&#x3E;
                &#x3C;/div&#x3E;
            &#x3C;/div&#x3E;

            <!-- 方案6：前导步 -->

            &#x3C;div class=&#x22;pattern-btn border border-gray-200 rounded-lg p-3 hover:border-primary cursor-pointer transition-colors&#x22; data-pattern=&#x22;6&#x22;&#x3E;
                &#x3C;h3 class=&#x22;font-medium text-primary mb-1&#x22;&#x3E;6. &#x524D;&#x5BFC;&#x6B65;&#x3C;/h3&#x3E;
                &#x3C;p class=&#x22;text-xs text-gray-500 mb-2&#x22;&#x3E;4&#x62CD;3&#x97F3; &#xB7; &#x542F;&#x52A8;&#x5F3A;&#x8C03;&#x3C;/p&#x3E;
                &#x3C;div class=&#x22;flex gap-1&#x22;&#x3E;
                    &#x3C;span class=&#x22;w-6 h-6 rounded flex items-center justify-center text-xs sound-a&#x22;&#x3E;&#x6EF4;&#x3C;/span&#x3E;
                    &#x3C;span class=&#x22;w-6 h-6 rounded flex items-center justify-center text-xs sound-a&#x22;&#x3E;&#x6EF4;&#x3C;/span&#x3E;
                    &#x3C;span class=&#x22;w-6 h-6 rounded flex items-center justify-center text-xs sound-b&#x22;&#x3E;&#x7B54;&#x3C;/span&#x3E;
                    &#x3C;span class=&#x22;w-6 h-6 rounded flex items-center justify-center text-xs border border-gray-200&#x22;&#x3E;-&#x3C;/span&#x3E;
                &#x3C;/div&#x3E;
            &#x3C;/div&#x3E;
        &#x3C;/div&#x3E;
    &#x3C;/div&#x3E;

    <!-- BPM调节 -->

    &#x3C;div class=&#x22;bg-white rounded-xl p-4 shadow-md max-w-md mx-auto mb-8&#x22;&#x3E;
        &#x3C;div class=&#x22;flex justify-between items-center mb-2&#x22;&#x3E;
            &#x3C;label class=&#x22;text-sm text-gray-600&#x22;&#x3E;&#x6B65;&#x9891;&#x8C03;&#x8282; (140-160 BPM)&#x3C;/label&#x3E;
            &#x3C;span id=&#x22;currentBpm&#x22; class=&#x22;font-medium text-primary&#x22;&#x3E;150&#x3C;/span&#x3E;
        &#x3C;/div&#x3E;
        &#x3C;input type=&#x22;range&#x22; id=&#x22;bpmSlider&#x22; min=&#x22;140&#x22; max=&#x22;160&#x22; value=&#x22;150&#x22; step=&#x22;5&#x22;
               class=&#x22;w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer&#x22;&#x3E;
    &#x3C;/div&#x3E;

    <!-- 添加到主屏幕提示按钮 -->

    &#x3C;button id=&#x22;addHomeBtn&#x22; class=&#x22;mt-2 w-full max-w-md mx-auto px-6 py-2 bg-pink-100 hover:bg-pink-200 text-primary rounded-lg text-sm flex items-center justify-center gap-2 transition-all-300&#x22;&#x3E;
        &#x3C;i class=&#x22;fa fa-home&#x22;&#x3E;&#x3C;/i&#x3E;
        &#x3C;span&#x3E;&#x6DFB;&#x52A0;&#x5230;&#x684C;&#x9762;&#xFF0C;&#x65B9;&#x4FBF;&#x5996;&#x602A;&#x4E0B;&#x6B21;&#x4F7F;&#x7528;&#x3C;/span&#x3E;
    &#x3C;/button&#x3E;
&#x3C;/main&#x3E;

<!-- 信息模态框 -->

&#x3C;div id=&#x22;infoModal&#x22; class=&#x22;fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 hidden&#x22;&#x3E;
    &#x3C;div class=&#x22;bg-white rounded-2xl max-w-md w-full mx-4 p-6 shadow-2xl transform transition-all&#x22;&#x3E;
        &#x3C;div class=&#x22;flex justify-between items-start mb-4&#x22;&#x3E;
            &#x3C;h2 class=&#x22;text-2xl font-bold text-primary&#x22;&#x3E;&#x7ED9;&#x6211;&#x5BB6;&#x5996;&#x602A;&#x7684;&#x5C0F;&#x63D0;&#x793A;&#x3C;/h2&#x3E;
            &#x3C;button id=&#x22;closeInfoBtn&#x22; class=&#x22;text-gray-500 hover:text-gray-700&#x22;&#x3E;
                &#x3C;i class=&#x22;fa fa-times text-xl&#x22;&#x3E;&#x3C;/i&#x3E;
            &#x3C;/button&#x3E;
        &#x3C;/div&#x3E;
        &#x3C;div id=&#x22;modalContent&#x22; class=&#x22;space-y-4 text-gray-700&#x22;&#x3E;
            &#x3C;p&#x3E;&#x8DD1;&#x6B65;&#x65F6;&#x8DDF;&#x7740;&#x5927;&#x7EA2;&#x5FC3;&#x7684;&#x8282;&#x62CD;&#x8DD1;&#x5C31;&#x5BF9;&#x5566;&#xFF0C;&#x6709;&#x516D;&#x79CD;&#x8282;&#x594F;&#x53EF;&#x4EE5;&#x9009;&#x62E9;&#x54E6;~&#x3C;/p&#x3E;
            &#x3C;p&#x3E;&#x6BCF;&#x79CD;&#x8282;&#x594F;&#x90FD;&#x7528;&#x22;&#x6EF4;&#x22;&#x548C;&#x22;&#x7B54;&#x22;&#x4E24;&#x79CD;&#x58F0;&#x97F3;&#xFF0C;&#x22;&#x6EF4;&#x22;&#x4EE3;&#x8868;&#x53F3;&#x811A;&#xFF0C;&#x22;&#x7B54;&#x22;&#x4EE3;&#x8868;&#x5DE6;&#x811A;~&#x3C;/p&#x3E;
            &#x3C;p&#x3E;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x81EA;&#x5DF1;&#x7684;&#x8DD1;&#x6B65;&#x4E60;&#x60EF;&#x8C03;&#x6574;&#x6B65;&#x9891;&#xFF0C;&#x627E;&#x5230;&#x6700;&#x8212;&#x670D;&#x7684;&#x8282;&#x594F;~&#x3C;/p&#x3E;
            &#x3C;p&#x3E;&#x6570;&#x636E;&#x533A;&#x57DF;&#x4F1A;&#x663E;&#x793A;&#x4F60;&#x8DD1;&#x4E86;&#x591A;&#x5C11;&#x516C;&#x91CC;&#xFF0C;&#x4E00;&#x6B65;&#x6309;0.7&#x7C73;&#x8BA1;&#x7B97;&#x54E6;~&#x3C;/p&#x3E;
            &#x3C;p class=&#x22;pt-2 border-t border-pink-100&#x22;&#x3E;&#x3C;i class=&#x22;fa fa-heart text-primary mr-2&#x22;&#x3E;&#x3C;/i&#x3E;
            &#x5996;&#x602A;&#x8DD1;&#x6B65;&#x7684;&#x65F6;&#x5019;&#x8981;&#x6CE8;&#x610F;&#x5B89;&#x5168;&#xFF0C;&#x8DD1;&#x5B8C;&#x6B65;&#x8BB0;&#x5F97;&#x62C9;&#x4F38;&#x54E6;&#xFF0C;&#x7231;&#x4F60;~&#x3C;/p&#x3E;
        &#x3C;/div&#x3E;
        &#x3C;button id=&#x22;gotItBtn&#x22; class=&#x22;mt-6 w-full py-3 bg-primary hover:bg-primary/90 text-white rounded-lg transition-all-300&#x22;&#x3E;
            &#x77E5;&#x9053;&#x5566;&#xFF0C;&#x8C22;&#x8C22;~
        &#x3C;/button&#x3E;
    &#x3C;/div&#x3E;
&#x3C;/div&#x3E;

&#x3C;footer class=&#x22;bg-white/80 backdrop-blur-md py-4 text-center text-gray-500 text-sm&#x22;&#x3E;
    &#x3C;div class=&#x22;container mx-auto px-4&#x22;&#x3E;
        &#x3C;p&#x3E;&#x7ED9;&#x6211;&#x6700;&#x7231;&#x7684;&#x5996;&#x602A; &#x26;copy; &#x6C38;&#x8FDC;&#x6709;&#x6548;&#x3C;/p&#x3E;
    &#x3C;/div&#x3E;
&#x3C;/footer&#x3E;

&#x3C;script&#x3E;
    // &#x5168;&#x5C40;&#x72B6;&#x6001;&#x7BA1;&#x7406;
    const state = {
        isRunning: false,
        isPaused: false,
        startTime: null,
        pauseTime: null,
        totalPausedTime: 0,
        distance: 0,
        totalSeconds: 0,
        currentKilometer: 0,
        lastKilometer: 0,
        cadence: 150, // BPM
        currentBeat: 0, // 0-3&#x5BF9;&#x5E94;1-4&#x62CD;
        currentPattern: 1,
        beatInterval: null,
        timerInterval: null,
        wakeLock: null,
        audioContext: null,
        isAudioReady: false,
        soundBuffers: {
            a: null, // &#x97F3;&#x6548;A&#xFF08;&#x6EF4;&#xFF09;
            b: null  // &#x97F3;&#x6548;B&#xFF08;&#x7B54;&#xFF09;
        },
        stepLength: 0.7 // &#x6B65;&#x957F;(&#x7C73;)
    };
    
    // &#x516D;&#x79CD;&#x8282;&#x594F;&#x65B9;&#x6848;&#x5B9A;&#x4E49;&#xFF08;4&#x62CD;&#x4E3A;&#x4E00;&#x4E2A;&#x5FAA;&#x73AF;&#xFF0C;&#x6BCF;&#x4E2A;&#x4F4D;&#x7F6E;&#x4E3A;&#x27;A&#x27;/&#x27;B&#x27;/&#x27;-&#x27;&#xFF09;
    const patterns = {
        1: [&#x27;A&#x27;, &#x27;B&#x27;, &#x27;A&#x27;, &#x27;B&#x27;], // &#x7ECF;&#x5178;&#x5DE6;&#x53F3;&#x4EA4;&#x66FF;&#xFF08;4&#x97F3;&#xFF09;
        2: [&#x27;A&#x27;, &#x27;A&#x27;, &#x27;B&#x27;, &#x27;B&#x27;], // &#x53CC;&#x500D;&#x6B65;&#x9891;&#xFF08;4&#x97F3;&#xFF09;
        3: [&#x27;A&#x27;, &#x27;B&#x27;, &#x27;-&#x27;, &#x27;A&#x27;], // &#x91CD;&#x70B9;&#x6B65;&#xFF08;3&#x97F3;&#xFF09;
        4: [&#x27;A&#x27;, &#x27;-&#x27;, &#x27;B&#x27;, &#x27;B&#x27;], // &#x5207;&#x5206;&#x8282;&#x594F;&#xFF08;3&#x97F3;&#xFF09;
        5: [&#x27;A&#x27;, &#x27;-&#x27;, &#x27;B&#x27;, &#x27;A&#x27;], // &#x534E;&#x5C14;&#x5179;&#x97F5;&#x5F8B;&#xFF08;3&#x97F3;&#xFF09;
        6: [&#x27;A&#x27;, &#x27;A&#x27;, &#x27;B&#x27;, &#x27;-&#x27;]  // &#x524D;&#x5BFC;&#x6B65;&#xFF08;3&#x97F3;&#xFF09;
    };
    
    // DOM&#x5143;&#x7D20;
    const elements = {
        startBtn: document.getElementById(&#x27;startBtn&#x27;),
        pauseBtn: document.getElementById(&#x27;pauseBtn&#x27;),
        resetBtn: document.getElementById(&#x27;resetBtn&#x27;),
        durationEl: document.getElementById(&#x27;duration&#x27;),
        distanceEl: document.getElementById(&#x27;distance&#x27;),
        paceEl: document.getElementById(&#x27;pace&#x27;),
        currentKilometerEl: document.getElementById(&#x27;currentKilometer&#x27;),
        statusText: null, // &#x52A8;&#x6001;&#x751F;&#x6210;&#x72B6;&#x6001;&#x6587;&#x672C;
        pulseRing: document.getElementById(&#x27;pulseRing&#x27;),
        beatIcon: document.getElementById(&#x27;beatIcon&#x27;),
        infoBtn: document.getElementById(&#x27;infoBtn&#x27;),
        infoModal: document.getElementById(&#x27;infoModal&#x27;),
        closeInfoBtn: document.getElementById(&#x27;closeInfoBtn&#x27;),
        gotItBtn: document.getElementById(&#x27;gotItBtn&#x27;),
        bpmSlider: document.getElementById(&#x27;bpmSlider&#x27;),
        bpmDisplay: document.getElementById(&#x27;bpmDisplay&#x27;),
        currentBpm: document.getElementById(&#x27;currentBpm&#x27;),
        beatElements: [
            document.getElementById(&#x27;beat1&#x27;),
            document.getElementById(&#x27;beat2&#x27;),
            document.getElementById(&#x27;beat3&#x27;),
            document.getElementById(&#x27;beat4&#x27;)
        ],
        patternBtns: document.querySelectorAll(&#x27;.pattern-btn&#x27;),
        greeting: document.getElementById(&#x27;greeting&#x27;)
    };
    
    // &#x521D;&#x59CB;&#x5316;&#x97F3;&#x9891;
    async function initAudio() {
        if (state.audioContext) return;
        
        try {
            state.audioContext = new (window.AudioContext || window.webkitAudioContext)();
            
            // &#x521B;&#x5EFA;&#x97F3;&#x6548;A&#xFF08;&#x6EF4; - &#x9AD8;&#x9891;&#x77ED;&#x4FC3;&#xFF09;
            state.soundBuffers.a = await createTone(1047, 0.1, 0.15); // &#x9891;&#x7387;1047Hz&#xFF0C;&#x65F6;&#x957F;0.1s
            
            // &#x521B;&#x5EFA;&#x97F3;&#x6548;B&#xFF08;&#x7B54; - &#x4F4E;&#x9891;&#x7A0D;&#x539A;&#xFF09;
            state.soundBuffers.b = await createTone(523, 0.12, 0.2); // &#x9891;&#x7387;523Hz&#xFF0C;&#x65F6;&#x957F;0.12s
            
            state.isAudioReady = true;
            console.log(&#x27;&#x97F3;&#x9891;&#x521D;&#x59CB;&#x5316;&#x5B8C;&#x6210;&#x27;);
        } catch (err) {
            console.error(&#x27;&#x97F3;&#x9891;&#x521D;&#x59CB;&#x5316;&#x5931;&#x8D25;:&#x27;, err);
            showGreeting(&#x22;&#x9700;&#x8981;&#x70B9;&#x51FB;&#x9875;&#x9762;&#x542F;&#x7528;&#x97F3;&#x9891;&#x529F;&#x80FD;&#x54E6;~&#x22;, 3000);
        }
    }
    
    // &#x521B;&#x5EFA;&#x57FA;&#x7840;&#x97F3;&#x8C03;
    function createTone(frequency, duration, gain) {
        return new Promise((resolve) =&#x3E; {
            const oscillator = state.audioContext.createOscillator();
            const gainNode = state.audioContext.createGain();
            const destination = state.audioContext.createMediaStreamDestination();
            const recorder = new MediaRecorder(destination.stream);
            const audioChunks = [];
            
            oscillator.type = &#x27;sine&#x27;;
            oscillator.frequency.setValueAtTime(frequency, state.audioContext.currentTime);
            gainNode.gain.setValueAtTime(gain, state.audioContext.currentTime);
            
            oscillator.connect(gainNode);
            gainNode.connect(destination);
            
            recorder.ondataavailable = (e) =&#x3E; audioChunks.push(e.data);
            recorder.onstop = async () =&#x3E; {
                const audioBlob = new Blob(audioChunks);
                const arrayBuffer = await audioBlob.arrayBuffer();
                const audioBuffer = await state.audioContext.decodeAudioData(arrayBuffer);
                resolve(audioBuffer);
            };
            
            oscillator.start();
            recorder.start();
            
            // &#x8BBE;&#x5B9A;&#x97F3;&#x6548;&#x65F6;&#x957F;
            setTimeout(() =&#x3E; {
                recorder.stop();
                oscillator.stop();
            }, duration * 1000);
        });
    }
    
    // &#x64AD;&#x653E;&#x6307;&#x5B9A;&#x97F3;&#x6548;
    function playSound(type) {
        if (!state.isAudioReady || state.audioContext.state === &#x27;suspended&#x27;) {
            state.audioContext.resume();
            return;
        }
        
        const buffer = state.soundBuffers[type];
        if (!buffer) return;
        
        const source = state.audioContext.createBufferSource();
        source.buffer = buffer;
        source.connect(state.audioContext.destination);
        source.start(0);
    }
    
    // &#x64AD;&#x653E;&#x5F53;&#x524D;&#x8282;&#x62CD;
    function playCurrentBeat() {
        // &#x91CD;&#x7F6E;&#x6240;&#x6709;&#x8282;&#x62CD;&#x6837;&#x5F0F;
        elements.beatElements.forEach(el =&#x3E; {
            el.classList.remove(&#x27;beat-highlight&#x27;, &#x27;sound-a&#x27;, &#x27;sound-b&#x27;);
            el.classList.add(&#x27;border-gray-200&#x27;);
        });
        
        // &#x83B7;&#x53D6;&#x5F53;&#x524D;&#x8282;&#x62CD;&#x7684;&#x97F3;&#x6548;
        const currentSound = patterns[state.currentPattern][state.currentBeat];
        const currentBeatEl = elements.beatElements[state.currentBeat];
        
        // &#x66F4;&#x65B0;&#x89C6;&#x89C9;&#x53CD;&#x9988;
        currentBeatEl.classList.add(&#x27;beat-highlight&#x27;, &#x27;border-primary&#x27;);
        if (currentSound === &#x27;A&#x27;) {
            currentBeatEl.classList.add(&#x27;sound-a&#x27;);
        } else if (currentSound === &#x27;B&#x27;) {
            currentBeatEl.classList.add(&#x27;sound-b&#x27;);
        }
        
        // &#x64AD;&#x653E;&#x97F3;&#x6548;&#xFF08;&#x5982;&#x679C;&#x4E0D;&#x662F;&#x4F11;&#x6B62;&#x7B26;&#xFF09;
        if (currentSound !== &#x27;-&#x27;) {
            playSound(currentSound.toLowerCase());
            
            // &#x540C;&#x6B65;&#x7EA2;&#x5FC3;&#x52A8;&#x753B;
            elements.beatIcon.classList.add(&#x27;beat-highlight&#x27;);
            setTimeout(() =&#x3E; {
                elements.beatIcon.classList.remove(&#x27;beat-highlight&#x27;);
            }, 150);
            
            // &#x8BA1;&#x7B97;&#x6B65;&#x957F;&#x548C;&#x8DDD;&#x79BB;
            state.distance += state.stepLength / 1000; // &#x8F6C;&#x6362;&#x4E3A;&#x516C;&#x91CC;
            updateStats();
            
            // &#x68C0;&#x67E5;&#x662F;&#x5426;&#x5B8C;&#x6210;&#x65B0;&#x7684;&#x4E00;&#x516C;&#x91CC;
            checkKilometerAchievement();
        }
        
        // &#x5207;&#x6362;&#x5230;&#x4E0B;&#x4E00;&#x62CD;&#xFF08;&#x5FAA;&#x73AF;&#xFF09;
        state.currentBeat = (state.currentBeat + 1) % 4;
    }
    
    // &#x663E;&#x793A;&#x4E2A;&#x6027;&#x5316;&#x95EE;&#x5019;&#x8BED;
    function showGreeting(message, duration = 3000) {
        const originalText = elements.greeting.textContent;
        elements.greeting.textContent = message;
        elements.greeting.classList.add(&#x27;text-accent&#x27;);
        
        setTimeout(() =&#x3E; {
            elements.greeting.textContent = originalText;
            elements.greeting.classList.remove(&#x27;text-accent&#x27;);
        }, duration);
    }
    
    // &#x68C0;&#x67E5;&#x662F;&#x5426;&#x5B8C;&#x6210;&#x65B0;&#x7684;&#x4E00;&#x516C;&#x91CC;
    function checkKilometerAchievement() {
        const currentKm = Math.floor(state.distance);
        if (currentKm &#x3E; state.lastKilometer &#x26;&#x26; currentKm &#x3E; 0) {
            // &#x8BA1;&#x7B97;&#x8FD9;&#x4E00;&#x516C;&#x91CC;&#x7684;&#x7528;&#x65F6;
            const kmTime = state.totalSeconds - (state.lastKilometer * 60000 / state.cadence * (1000 / (state.stepLength * 100)));
            
            // &#x8BA1;&#x7B97;&#x8FD9;&#x4E00;&#x516C;&#x91CC;&#x7684;&#x914D;&#x901F;(&#x79D2;/&#x516C;&#x91CC;)
            const kmPace = kmTime / (currentKm - state.lastKilometer);
            
            // &#x66F4;&#x65B0;&#x5F53;&#x524D;&#x516C;&#x91CC;&#x6570;
            state.lastKilometer = currentKm;
            elements.currentKilometerEl.textContent = currentKm;
            
            // &#x64AD;&#x653E;&#x516C;&#x91CC;&#x63D0;&#x9192;
            playKilometerAlert(currentKm, kmTime, kmPace);
            
            // &#x663E;&#x793A;&#x9F13;&#x52B1;&#x4FE1;&#x606F;
            const encouragements = [
                &#x60;&#x592A;&#x68D2;&#x4E86;&#xFF01;&#x5DF2;&#x7ECF;&#x8DD1;&#x4E86;${currentKm}&#x516C;&#x91CC;&#x5566;~&#x60;,
                &#x60;&#x5996;&#x602A;&#x597D;&#x5389;&#x5BB3;&#xFF0C;&#x90FD;&#x8DD1;&#x5230;${currentKm}&#x516C;&#x91CC;&#x4E86;&#xFF01;&#x60;,
                &#x60;&#x52A0;&#x6CB9;&#x54E6;&#xFF0C;&#x5DF2;&#x7ECF;${currentKm}&#x516C;&#x91CC;&#x4E86;&#xFF0C;&#x7EE7;&#x7EED;&#x4FDD;&#x6301;~&#x60;
            ];
            const randomEncouragement = encouragements[Math.floor(Math.random() * encouragements.length)];
            showGreeting(randomEncouragement, 4000);
        }
    }
    
    // &#x64AD;&#x653E;&#x516C;&#x91CC;&#x63D0;&#x9192;&#x8BED;&#x97F3;
    function playKilometerAlert(km, time, pace) {
        if (!state.isAudioReady) return;
        
        // &#x6784;&#x5EFA;&#x8BED;&#x97F3;&#x6587;&#x672C;
        const timeStr = &#x60;${Math.floor(time / 60)}&#x5206;${Math.floor(time % 60)}&#x79D2;&#x60;;
        const paceStr = &#x60;${Math.floor(pace / 60)}&#x5206;${Math.floor(pace % 60)}&#x79D2;&#x60;;
        const text = &#x60;&#x4F60;&#x5DF2;&#x8DD1;&#x6B65;${km}&#x516C;&#x91CC;&#xFF0C;&#x7528;&#x65F6;${timeStr}&#xFF0C;&#x5E73;&#x5747;&#x914D;&#x901F;${paceStr}&#x6BCF;&#x516C;&#x91CC;&#x60;;
        
        // &#x4F7F;&#x7528;Web Speech API
        const utterance = new SpeechSynthesisUtterance(text);
        utterance.lang = &#x27;zh-CN&#x27;;
        utterance.volume = 1;
        utterance.rate = 0.9; // &#x7A0D;&#x6162;&#x4E00;&#x70B9;&#x66F4;&#x6E05;&#x6670;
        utterance.pitch = 1.1; // &#x7A0D;&#x5FAE;&#x9AD8;&#x4E00;&#x70B9;&#x66F4;&#x4EB2;&#x5207;
        
        // &#x6682;&#x505C;&#x8282;&#x62CD;&#x97F3;&#x6548;
        const wasRunning = state.isRunning;
        if (wasRunning) {
            clearInterval(state.beatInterval);
        }
        
        // &#x64AD;&#x653E;&#x8BED;&#x97F3;
        window.speechSynthesis.speak(utterance);
        
        // &#x8BED;&#x97F3;&#x64AD;&#x653E;&#x5B8C;&#x6210;&#x540E;&#x6062;&#x590D;&#x8282;&#x62CD;
        utterance.onend = () =&#x3E; {
            if (wasRunning &#x26;&#x26; state.isRunning &#x26;&#x26; !state.isPaused) {
                startBeatInterval();
            }
        };
    }
    
    // &#x66F4;&#x65B0;&#x7EDF;&#x8BA1;&#x6570;&#x636E;
    function updateStats() {
        if (!state.isRunning) return;
        
        // &#x8BA1;&#x7B97;&#x603B;&#x65F6;&#x95F4;(&#x6263;&#x9664;&#x6682;&#x505C;&#x65F6;&#x95F4;)
        const now = new Date();
        const runningTime = state.pauseTime ? 
            (state.pauseTime - state.startTime) + (now - state.pauseTime) - state.totalPausedTime :
            now - state.startTime - state.totalPausedTime;
            
        state.totalSeconds = Math.floor(runningTime / 1000);
        
        // &#x8BA1;&#x7B97;&#x5E76;&#x66F4;&#x65B0;&#x65F6;&#x95F4;&#x663E;&#x793A;
        const minutes = Math.floor(state.totalSeconds / 60);
        const seconds = state.totalSeconds % 60;
        elements.durationEl.textContent = &#x60;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&#x60;;
        
        // &#x66F4;&#x65B0;&#x8DDD;&#x79BB;&#x663E;&#x793A;
        elements.distanceEl.textContent = &#x60;${state.distance.toFixed(2)} &#x516C;&#x91CC;&#x60;;
        
        // &#x8BA1;&#x7B97;&#x5E76;&#x66F4;&#x65B0;&#x914D;&#x901F;(&#x5206;&#x949F;/&#x516C;&#x91CC;)
        if (state.distance &#x3E; 0) {
            const paceSeconds = state.totalSeconds / state.distance;
            const paceMinutes = Math.floor(paceSeconds / 60);
            const paceSecs = Math.floor(paceSeconds % 60);
            elements.paceEl.textContent = &#x60;${paceMinutes.toString().padStart(2, &#x27;0&#x27;)}:${paceSecs.toString().padStart(2, &#x27;0&#x27;)}&#x60;;
        }
    }
    
    // &#x5F00;&#x59CB;&#x8282;&#x62CD;&#x95F4;&#x9694;
    function startBeatInterval() {
        // &#x6E05;&#x9664;&#x73B0;&#x6709;&#x95F4;&#x9694;
        if (state.beatInterval) {
            clearInterval(state.beatInterval);
        }
        
        // &#x6839;&#x636E;&#x6B65;&#x9891;&#x8BA1;&#x7B97;&#x95F4;&#x9694;&#x65F6;&#x95F4;(&#x6BEB;&#x79D2;)
        const beatIntervalMs = 60000 / state.cadence;
        
        // &#x8BBE;&#x7F6E;&#x65B0;&#x7684;&#x8282;&#x62CD;&#x95F4;&#x9694;
        state.beatInterval = setInterval(playCurrentBeat, beatIntervalMs);
    }
    
    // &#x5F00;&#x59CB;&#x8DD1;&#x6B65;
    async function startRunning() {
        // &#x521D;&#x59CB;&#x5316;&#x97F3;&#x9891;
        if (!state.isAudioReady) {
            await initAudio();
            if (!state.isAudioReady) {
                return;
            }
        }
        
        if (state.isPaused) {
            // &#x4ECE;&#x6682;&#x505C;&#x72B6;&#x6001;&#x6062;&#x590D;
            state.isPaused = false;
            state.pauseTime = new Date();
            showGreeting(&#x22;&#x7EE7;&#x7EED;&#x8DD1;&#x6B65;&#x5566;&#xFF0C;&#x52A0;&#x6CB9;&#x54E6;~&#x22;);
            
            // &#x6062;&#x590D;&#x5524;&#x9192;&#x9501;
            requestWakeLock();
            
            // &#x6062;&#x590D;&#x8282;&#x62CD;
            startBeatInterval();
        } else {
            // &#x5168;&#x65B0;&#x5F00;&#x59CB;
            state.isRunning = true;
            state.startTime = new Date();
            state.pauseTime = new Date();
            showGreeting(&#x22;&#x5F00;&#x59CB;&#x8DD1;&#x6B65;&#x54AF;&#xFF0C;&#x8DDF;&#x7740;&#x8282;&#x594F;&#x8DD1;&#x8D77;&#x6765;~&#x22;);
            
            // &#x83B7;&#x53D6;&#x5524;&#x9192;&#x9501;
            requestWakeLock();
            
            // &#x542F;&#x52A8;&#x5B9A;&#x65F6;&#x5668;&#x66F4;&#x65B0;&#x7EDF;&#x8BA1;
            state.timerInterval = setInterval(updateStats, 1000);
            
            // &#x5F00;&#x59CB;&#x8282;&#x62CD;
            startBeatInterval();
        }
        
        // &#x66F4;&#x65B0;&#x6309;&#x94AE;&#x72B6;&#x6001;
        elements.startBtn.disabled = true;
        elements.startBtn.classList.add(&#x27;bg-gray-200&#x27;, &#x27;text-gray-600&#x27;);
        elements.startBtn.classList.remove(&#x27;bg-primary&#x27;, &#x27;hover:bg-primary/90&#x27;, &#x27;text-white&#x27;);
        elements.pauseBtn.disabled = false;
        elements.pauseBtn.classList.remove(&#x27;bg-gray-200&#x27;, &#x27;text-gray-600&#x27;);
        elements.pauseBtn.classList.add(&#x27;bg-secondary&#x27;, &#x27;hover:bg-secondary/90&#x27;, &#x27;text-white&#x27;);
        elements.resetBtn.disabled = false;
        elements.resetBtn.classList.remove(&#x27;bg-gray-200&#x27;, &#x27;text-gray-600&#x27;);
        elements.resetBtn.classList.add(&#x27;bg-gray-500&#x27;, &#x27;hover:bg-gray-600&#x27;, &#x27;text-white&#x27;);
    }
    
    // &#x6682;&#x505C;&#x8DD1;&#x6B65;
    function pauseRunning() {
        if (!state.isRunning) return;
        
        state.isPaused = true;
        state.totalPausedTime += new Date() - state.pauseTime;
        showGreeting(&#x22;&#x4F11;&#x606F;&#x4E00;&#x4E0B;&#x4E0B;&#xFF0C;&#x7B49;&#x4E0B;&#x7EE7;&#x7EED;&#x54E6;~&#x22;);
        
        // &#x6682;&#x505C;&#x8282;&#x62CD;
        clearInterval(state.beatInterval);
        
        // &#x91CA;&#x653E;&#x5524;&#x9192;&#x9501;
        releaseWakeLock();
        
        // &#x66F4;&#x65B0;&#x6309;&#x94AE;&#x72B6;&#x6001;
        elements.startBtn.disabled = false;
        elements.startBtn.classList.remove(&#x27;bg-gray-200&#x27;, &#x27;text-gray-600&#x27;);
        elements.startBtn.classList.add(&#x27;bg-primary&#x27;, &#x27;hover:bg-primary/90&#x27;, &#x27;text-white&#x27;);
        elements.pauseBtn.disabled = true;
        elements.pauseBtn.classList.add(&#x27;bg-gray-200&#x27;, &#x27;text-gray-600&#x27;);
        elements.pauseBtn.classList.remove(&#x27;bg-secondary&#x27;, &#x27;hover:bg-secondary/90&#x27;, &#x27;text-white&#x27;);
    }
    
    // &#x91CD;&#x7F6E;&#x8DD1;&#x6B65;
    function resetRunning() {
        // &#x505C;&#x6B62;&#x6240;&#x6709;&#x5B9A;&#x65F6;&#x5668;
        clearInterval(state.beatInterval);
        clearInterval(state.timerInterval);
        
        // &#x91CA;&#x653E;&#x5524;&#x9192;&#x9501;
        releaseWakeLock();
        
        // &#x91CD;&#x7F6E;&#x72B6;&#x6001;
        state.isRunning = false;
        state.isPaused = false;
        state.startTime = null;
        state.pauseTime = null;
        state.totalPausedTime = 0;
        state.distance = 0;
        state.totalSeconds = 0;
        state.currentKilometer = 0;
        state.lastKilometer = 0;
        state.currentBeat = 0;
        
        // &#x91CD;&#x7F6E;UI
        elements.durationEl.textContent = &#x27;00:00&#x27;;
        elements.distanceEl.textContent = &#x27;0.00 &#x516C;&#x91CC;&#x27;;
        elements.paceEl.textContent = &#x27;00:00&#x27;;
        elements.currentKilometerEl.textContent = &#x27;0&#x27;;
        
        // &#x91CD;&#x7F6E;&#x8282;&#x62CD;&#x663E;&#x793A;
        elements.beatElements.forEach(el =&#x3E; {
            el.classList.remove(&#x27;beat-highlight&#x27;, &#x27;sound-a&#x27;, &#x27;sound-b&#x27;, &#x27;border-primary&#x27;);
            el.classList.add(&#x27;border-gray-200&#x27;);
        });
        
        showGreeting(&#x22;&#x5DF2;&#x7ECF;&#x91CD;&#x7F6E;&#x597D;&#x5566;&#xFF0C;&#x968F;&#x65F6;&#x53EF;&#x4EE5;&#x91CD;&#x65B0;&#x5F00;&#x59CB;~&#x22;);
        
        // &#x66F4;&#x65B0;&#x6309;&#x94AE;&#x72B6;&#x6001;
        elements.startBtn.disabled = false;
        elements.startBtn.classList.remove(&#x27;bg-gray-200&#x27;, &#x27;text-gray-600&#x27;);
        elements.startBtn.classList.add(&#x27;bg-primary&#x27;, &#x27;hover:bg-primary/90&#x27;, &#x27;text-white&#x27;);
        elements.pauseBtn.disabled = true;
        elements.pauseBtn.classList.add(&#x27;bg-gray-200&#x27;, &#x27;text-gray-600&#x27;);
        elements.pauseBtn.classList.remove(&#x27;bg-secondary&#x27;, &#x27;hover:bg-secondary/90&#x27;, &#x27;text-white&#x27;);
        elements.resetBtn.disabled = true;
        elements.resetBtn.classList.add(&#x27;bg-gray-200&#x27;, &#x27;text-gray-600&#x27;);
        elements.resetBtn.classList.remove(&#x27;bg-gray-500&#x27;, &#x27;hover:bg-gray-600&#x27;, &#x27;text-white&#x27;);
    }
    
    // &#x5207;&#x6362;&#x8282;&#x594F;&#x65B9;&#x6848;
    function setPattern(patternId) {
        state.currentPattern = patternId;
        state.currentBeat = 0;
        
        // &#x66F4;&#x65B0;&#x6309;&#x94AE;&#x6837;&#x5F0F;
        elements.patternBtns.forEach(btn =&#x3E; {
            if (parseInt(btn.dataset.pattern) === patternId) {
                btn.classList.add(&#x27;border-primary&#x27;, &#x27;bg-primary/5&#x27;);
            } else {
                btn.classList.remove(&#x27;border-primary&#x27;, &#x27;bg-primary/5&#x27;);
            }
        });
        
        // &#x91CD;&#x7F6E;&#x5F53;&#x524D;&#x8282;&#x62CD;&#x663E;&#x793A;
        elements.beatElements.forEach(el =&#x3E; {
            el.classList.remove(&#x27;beat-highlight&#x27;, &#x27;sound-a&#x27;, &#x27;sound-b&#x27;, &#x27;border-primary&#x27;);
            el.classList.add(&#x27;border-gray-200&#x27;);
        });
        
        // &#x663E;&#x793A;&#x63D0;&#x793A;
        const patternNames = [
            &#x22;&#x22;, // &#x7D22;&#x5F15;0&#x4E0D;&#x7528;
            &#x22;&#x7ECF;&#x5178;&#x5DE6;&#x53F3;&#x4EA4;&#x66FF;&#x22;,
            &#x22;&#x53CC;&#x500D;&#x6B65;&#x9891;&#x22;,
            &#x22;&#x91CD;&#x70B9;&#x6B65;&#x22;,
            &#x22;&#x5207;&#x5206;&#x8282;&#x594F;&#x22;,
            &#x22;&#x534E;&#x5C14;&#x5179;&#x97F5;&#x5F8B;&#x22;,
            &#x22;&#x524D;&#x5BFC;&#x6B65;&#x22;
        ];
        showGreeting(&#x60;&#x5DF2;&#x9009;&#x62E9;${patternNames[patternId]}&#x8282;&#x594F;~&#x60;);
    }
    
    // &#x8C03;&#x6574;BPM
    function setBpm(value) {
        state.cadence = parseInt(value);
        elements.bpmDisplay.textContent = state.cadence;
        elements.currentBpm.textContent = state.cadence;
        
        // &#x5982;&#x679C;&#x6B63;&#x5728;&#x8FD0;&#x884C;&#xFF0C;&#x91CD;&#x65B0;&#x542F;&#x52A8;&#x4EE5;&#x5E94;&#x7528;&#x65B0;&#x901F;&#x5EA6;
        if (state.isRunning &#x26;&#x26; !state.isPaused) {
            clearInterval(state.beatInterval);
            startBeatInterval();
        }
    }
    
    // &#x521D;&#x59CB;&#x5316;&#x5524;&#x9192;&#x9501;
    async function requestWakeLock() {
        if (!state.isRunning || state.wakeLock) return;
        
        try {
            if (&#x27;wakeLock&#x27; in navigator) {
                state.wakeLock = await navigator.wakeLock.request(&#x27;screen&#x27;);
                
                state.wakeLock.addEventListener(&#x27;release&#x27;, () =&#x3E; {
                    if (state.isRunning &#x26;&#x26; !state.isPaused) {
                        setTimeout(requestWakeLock, 1000);
                    }
                });
            }
        } catch (err) {
            console.warn(&#x27;&#x65E0;&#x6CD5;&#x83B7;&#x53D6;&#x5524;&#x9192;&#x9501;:&#x27;, err);
        }
    }
    
    // &#x91CA;&#x653E;&#x5524;&#x9192;&#x9501;
    function releaseWakeLock() {
        if (state.wakeLock) {
            state.wakeLock.release()
                .then(() =&#x3E; {
                    state.wakeLock = null;
                })
                .catch(err =&#x3E; {
                    console.error(&#x27;&#x91CA;&#x653E;&#x5524;&#x9192;&#x9501;&#x5931;&#x8D25;:&#x27;, err);
                });
        }
    }
    
    // &#x4E8B;&#x4EF6;&#x76D1;&#x542C;
    elements.startBtn.addEventListener(&#x27;click&#x27;, startRunning);
    elements.pauseBtn.addEventListener(&#x27;click&#x27;, pauseRunning);
    elements.resetBtn.addEventListener(&#x27;click&#x27;, resetRunning);
    
    // BPM&#x8C03;&#x8282;
    elements.bpmSlider.addEventListener(&#x27;input&#x27;, (e) =&#x3E; {
        setBpm(e.target.value);
    });
    
    // &#x8282;&#x594F;&#x65B9;&#x6848;&#x9009;&#x62E9;
    elements.patternBtns.forEach(btn =&#x3E; {
        btn.addEventListener(&#x27;click&#x27;, () =&#x3E; {
            setPattern(parseInt(btn.dataset.pattern));
        });
    });
    
    // &#x4FE1;&#x606F;&#x6A21;&#x6001;&#x6846;
    elements.infoBtn.addEventListener(&#x27;click&#x27;, () =&#x3E; {
        elements.infoModal.classList.remove(&#x27;hidden&#x27;);
        document.body.style.overflow = &#x27;hidden&#x27;;
    });
    
    function closeModal() {
        elements.infoModal.classList.add(&#x27;hidden&#x27;);
        document.body.style.overflow = &#x27;&#x27;;
    }
    
    elements.closeInfoBtn.addEventListener(&#x27;click&#x27;, closeModal);
    elements.gotItBtn.addEventListener(&#x27;click&#x27;, closeModal);
    
    elements.infoModal.addEventListener(&#x27;click&#x27;, (e) =&#x3E; {
        if (e.target === elements.infoModal) {
            closeModal();
        }
    });
    
    // &#x521D;&#x59CB;&#x5316;&#x9875;&#x9762;
    window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&#x3E; {
        // &#x9ED8;&#x8BA4;&#x9009;&#x62E9;&#x65B9;&#x6848;1
        setPattern(1);
        
        // &#x786E;&#x4FDD;&#x97F3;&#x9891;&#x5728;&#x7528;&#x6237;&#x4EA4;&#x4E92;&#x540E;&#x521D;&#x59CB;&#x5316;
        const initAudioOnInteraction = () =&#x3E; {
            initAudio();
            document.removeEventListener(&#x27;click&#x27;, initAudioOnInteraction);
            document.removeEventListener(&#x27;touchstart&#x27;, initAudioOnInteraction);
        };
        
        document.addEventListener(&#x27;click&#x27;, initAudioOnInteraction);
        document.addEventListener(&#x27;touchstart&#x27;, initAudioOnInteraction);
        
        // &#x68C0;&#x67E5;&#x662F;&#x5426;&#x662F;&#x79FB;&#x52A8;&#x8BBE;&#x5907;&#xFF0C;&#x663E;&#x793A;&#x6DFB;&#x52A0;&#x5230;&#x684C;&#x9762;&#x63D0;&#x793A;
        if (/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)) {
            setTimeout(() =&#x3E; {
                document.getElementById(&#x27;addHomeBtn&#x27;).classList.remove(&#x27;opacity-0&#x27;);
            }, 3000);
        }
    });
&#x3C;/script&#x3E;
